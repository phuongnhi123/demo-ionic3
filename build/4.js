webpackJsonp([4],{314:function(l,n,u){"use strict";function a(l){return t._22(0,[(l()(),t.Z(0,0,null,null,10,"ion-header",[],null,null,null,null,null)),t.Y(1,16384,null,0,k.a,[P.a,t.j,t.z,[2,v.a]],null,null),(l()(),t._20(-1,null,["\n    "])),(l()(),t.Z(3,0,null,null,6,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,Y.b,Y.a)),t.Y(4,49152,null,0,x.a,[j.a,[2,v.a],[2,T.a],P.a,t.j,t.z],null,null),(l()(),t._20(-1,3,["\n      "])),(l()(),t.Z(6,0,null,3,2,"ion-title",[],null,null,null,Z.b,Z.a)),t.Y(7,49152,null,0,R.a,[P.a,t.j,t.z,[2,C.a],[2,x.a]],null,null),(l()(),t._20(8,0,["",""])),(l()(),t._20(-1,3,["\n    "])),(l()(),t._20(-1,null,["\n  "])),(l()(),t._20(-1,null,["\n  "])),(l()(),t.Z(12,0,null,null,54,"ion-content",[["padding",""]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,z.b,z.a)),t.Y(13,4374528,null,0,A.a,[P.a,U.a,L.a,t.j,t.z,j.a,w.a,t.u,[2,v.a],[2,T.a]],null,null),(l()(),t._20(-1,1,["\n    "])),(l()(),t.Z(15,0,null,1,32,"ion-item",[["class","item item-block"]],null,null,null,D.b,D.a)),t.Y(16,1097728,null,3,O.a,[S.a,P.a,t.j,t.z,[2,q.a]],null,null),t._18(335544320,1,{contentLabel:0}),t._18(603979776,2,{_buttons:1}),t._18(603979776,3,{_icons:1}),t.Y(20,16384,null,0,N.a,[],null,null),(l()(),t._20(-1,2,["\n      "])),(l()(),t.Z(22,0,null,2,24,"ion-row",[["class","row"]],null,null,null,null,null)),t.Y(23,16384,null,0,E.a,[],null,null),(l()(),t._20(-1,null,["\n        "])),(l()(),t.Z(25,0,null,null,9,"ion-col",[["class","col"],["width-50",""]],null,null,null,null,null)),t.Y(26,16384,null,0,I.a,[],null,null),(l()(),t._20(-1,null,["\n          "])),(l()(),t.Z(28,0,null,null,5,"button",[["color","danger"],["full",""],["ion-button",""],["large",""],["round",""],["type","button"]],null,[[null,"click"]],function(l,n,u){var a=!0;if("click"===n){a=!1!==l.component.takePhoto()&&a}return a},M.b,M.a)),t.Y(29,1097728,null,0,B.a,[[8,""],P.a,t.j,t.z],{color:[0,"color"],large:[1,"large"],round:[2,"round"],full:[3,"full"]},null),(l()(),t._20(-1,0,["\n                      "])),(l()(),t.Z(31,0,null,0,1,"ion-icon",[["name","md-camera"],["role","img"]],[[2,"hide",null]],null,null,null,null)),t.Y(32,147456,null,0,J.a,[P.a,t.j,t.z],{name:[0,"name"]},null),(l()(),t._20(-1,0,["\n                  "])),(l()(),t._20(-1,null,["\n        "])),(l()(),t._20(-1,null,["\n        "])),(l()(),t.Z(36,0,null,null,9,"ion-col",[["class","col"],["width-50",""]],null,null,null,null,null)),t.Y(37,16384,null,0,I.a,[],null,null),(l()(),t._20(-1,null,["\n          "])),(l()(),t.Z(39,0,null,null,5,"button",[["color","secondary"],["full",""],["ion-button",""],["large",""],["round",""],["type","button"]],null,[[null,"click"]],function(l,n,u){var a=!0;if("click"===n){a=!1!==l.component.selectPhoto()&&a}return a},M.b,M.a)),t.Y(40,1097728,null,0,B.a,[[8,""],P.a,t.j,t.z],{color:[0,"color"],large:[1,"large"],round:[2,"round"],full:[3,"full"]},null),(l()(),t._20(-1,0,["\n                      "])),(l()(),t.Z(42,0,null,0,1,"ion-icon",[["name","md-image"],["role","img"]],[[2,"hide",null]],null,null,null,null)),t.Y(43,147456,null,0,J.a,[P.a,t.j,t.z],{name:[0,"name"]},null),(l()(),t._20(-1,0,["\n                  "])),(l()(),t._20(-1,null,["\n        "])),(l()(),t._20(-1,null,["\n      "])),(l()(),t._20(-1,2,["\n    "])),(l()(),t._20(-1,1,["\n    "])),(l()(),t.Z(49,0,null,1,8,"ion-item",[["class","item item-block"]],null,null,null,D.b,D.a)),t.Y(50,1097728,null,3,O.a,[S.a,P.a,t.j,t.z,[2,q.a]],null,null),t._18(335544320,4,{contentLabel:0}),t._18(603979776,5,{_buttons:1}),t._18(603979776,6,{_icons:1}),t.Y(54,16384,null,0,N.a,[],null,null),(l()(),t._20(-1,2,["\n      "])),(l()(),t.Z(56,0,null,2,0,"img",[["class","img-responsive"]],[[8,"src",4]],null,null,null,null)),(l()(),t._20(-1,2,["\n    "])),(l()(),t._20(-1,1,["\n    "])),(l()(),t.Z(59,0,null,1,6,"ion-item",[["class","item item-block"]],null,null,null,D.b,D.a)),t.Y(60,1097728,null,3,O.a,[S.a,P.a,t.j,t.z,[2,q.a]],null,null),t._18(335544320,7,{contentLabel:0}),t._18(603979776,8,{_buttons:1}),t._18(603979776,9,{_icons:1}),t.Y(64,16384,null,0,N.a,[],null,null),(l()(),t._20(65,2,["\n        ","\n      "])),(l()(),t._20(-1,1,["\n  "])),(l()(),t._20(-1,null,["\n  "]))],function(l,n){l(n,29,0,"danger","","","");l(n,32,0,"md-camera");l(n,40,0,"secondary","","","");l(n,43,0,"md-image")},function(l,n){var u=n.component;l(n,3,0,t._11(n,4)._hidden,t._11(n,4)._sbPadding);l(n,8,0,"Upload ");l(n,12,0,t._11(n,13).statusbarPadding,t._11(n,13)._hasRefresher);l(n,31,0,t._11(n,32)._hidden);l(n,42,0,t._11(n,43)._hidden);l(n,56,0,t._2(1,"",u.myPhotoURL,""));l(n,65,0,u.myPhotoURL)})}Object.defineProperty(n,"__esModule",{value:!0});var t=u(0),o=(u(3),u(84)),e=(u(138),u(144)),i=u(231),s=u.n(i),c=(u(141),function(){function l(l,n,u,a){this.navCtrl=l,this.camera=n,this.loadingCtrl=u,this.user=a,this.currentItems=[],this.myPhotosRef=s.a.storage().ref("/Photos/")}return l.prototype.takePhoto=function(){var l=this;this.camera.getPicture({quality:100,destinationType:this.camera.DestinationType.DATA_URL,sourceType:this.camera.PictureSourceType.CAMERA,encodingType:this.camera.EncodingType.PNG,saveToPhotoAlbum:!0}).then(function(n){l.myPhoto=n,l.uploadPhoto()},function(l){console.log("ERROR -> "+JSON.stringify(l))})},l.prototype.selectPhoto=function(){var l=this;this.camera.getPicture({sourceType:this.camera.PictureSourceType.PHOTOLIBRARY,destinationType:this.camera.DestinationType.DATA_URL,quality:100,encodingType:this.camera.EncodingType.PNG}).then(function(n){l.myPhoto=n,l.uploadPhoto()},function(l){console.log("ERROR -> "+JSON.stringify(l))})},l.prototype.uploadPhoto=function(){var l=this;this.loading=this.loadingCtrl.create({spinner:"hide",content:"Please wait..."}),this.loading.present(),this.myPhotosRef.child(this.generateUUID()).child("myPhoto.png").putString(this.myPhoto,"base64",{contentType:"image/png"}).then(function(n){l.loading.dismiss(),l.myPhotoURL=n.downloadURL;var u=s.a.database().ref().child("mensajes"),a={time:(new Date).getTime(),mensaje:{isLink:!0,data:l.myPhotoURL}};u.push({mensaje:JSON.stringify(a),nombre:l.user._user.email}),l.navCtrl.canGoBack()&&setTimeout(function(n){return l.navCtrl.pop()},3e3)})},l.prototype.generateUUID=function(){var l=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx".replace(/[xy]/g,function(n){var u=(l+16*Math.random())%16|0;return l=Math.floor(l/16),("x"==n?u:3&u|8).toString(16)})},l}()),r=function(){return function(){}}(),_=u(218),d=u(219),b=u(220),h=u(221),m=u(222),g=u(223),p=u(224),f=u(225),y=u(226),k=u(86),P=u(1),v=u(5),Y=u(316),x=u(35),j=u(9),T=u(20),Z=u(228),R=u(60),C=u(36),z=u(227),A=u(22),U=u(4),L=u(10),w=u(25),D=u(229),O=u(18),S=u(15),q=u(45),N=u(87),E=u(149),I=u(148),M=u(43),B=u(21),J=u(44),G=u(94),X=u(143),F=t.X({encapsulation:2,styles:[],data:{}}),H=t.V("page-upload",c,function(l){return t._22(0,[(l()(),t.Z(0,0,null,null,1,"page-upload",[],null,null,null,a,F)),t.Y(1,49152,null,0,c,[T.a,e.a,G.a,X.a],null,null)],null,null)},{},{},[]),V=u(12),W=u(17),K=u(56),Q=u(57),$=u(59),ll=u(58),nl=u(28),ul=u(85),al=u(139),tl=u(40);u.d(n,"UploadPageModuleNgFactory",function(){return ol});var ol=t.W(r,[],function(l){return t._7([t._8(512,t.i,t.S,[[8,[_.a,d.a,b.a,h.a,m.a,g.a,p.a,f.a,y.a,H]],[3,t.i],t.s]),t._8(4608,V.l,V.k,[t.r,[2,V.t]]),t._8(4608,W.r,W.r,[]),t._8(4608,W.d,W.d,[]),t._8(4608,K.b,K.a,[]),t._8(4608,Q.a,Q.b,[]),t._8(4608,$.b,$.a,[]),t._8(4608,ll.b,ll.a,[]),t._8(4608,nl.a,nl.a,[ul.a,K.b,Q.a,$.b,ll.b,nl.b,nl.c]),t._8(512,V.b,V.b,[]),t._8(512,W.p,W.p,[]),t._8(512,W.g,W.g,[]),t._8(512,W.n,W.n,[]),t._8(512,al.a,al.a,[]),t._8(512,al.b,al.b,[]),t._8(512,o.a,o.a,[]),t._8(512,r,r,[]),t._8(256,tl.a,c,[]),t._8(256,nl.c,void 0,[]),t._8(256,nl.b,void 0,[])])})},316:function(l,n,u){"use strict";function a(l){return t._22(0,[(l()(),t.Z(0,0,null,null,1,"div",[["class","toolbar-background"]],null,null,null,null,null)),t.Y(1,278528,null,0,o.h,[t.p,t.q,t.j,t.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(l()(),t.Z(2,0,null,null,8,"button",[["class","back-button"],["ion-button","bar-button"]],[[8,"hidden",0]],[[null,"click"]],function(l,n,u){var a=!0;if("click"===n){a=!1!==l.component.backButtonClick(u)&&a}return a},e.b,e.a)),t.Y(3,278528,null,0,o.h,[t.p,t.q,t.j,t.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Y(4,1097728,null,0,i.a,[[8,"bar-button"],s.a,t.j,t.z],null,null),(l()(),t.Z(5,0,null,0,2,"ion-icon",[["class","back-button-icon"],["role","img"]],[[2,"hide",null]],null,null,null,null)),t.Y(6,278528,null,0,o.h,[t.p,t.q,t.j,t.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Y(7,147456,null,0,c.a,[s.a,t.j,t.z],{name:[0,"name"]},null),(l()(),t.Z(8,0,null,0,2,"span",[["class","back-button-text"]],null,null,null,null,null)),t.Y(9,278528,null,0,o.h,[t.p,t.q,t.j,t.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(l()(),t._20(10,null,["",""])),t._10(null,0),t._10(null,1),t._10(null,2),(l()(),t.Z(14,0,null,null,2,"div",[["class","toolbar-content"]],null,null,null,null,null)),t.Y(15,278528,null,0,o.h,[t.p,t.q,t.j,t.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t._10(null,3)],function(l,n){var u=n.component;l(n,1,0,"toolbar-background","toolbar-background-"+u._mode);l(n,3,0,"back-button","back-button-"+u._mode);l(n,6,0,"back-button-icon","back-button-icon-"+u._mode);l(n,7,0,u._bbIcon);l(n,9,0,"back-button-text","back-button-text-"+u._mode);l(n,15,0,"toolbar-content","toolbar-content-"+u._mode)},function(l,n){var u=n.component;l(n,2,0,u._hideBb);l(n,5,0,t._11(n,7)._hidden);l(n,10,0,u._backText)})}u.d(n,"a",function(){return r}),n.b=a;var t=u(0),o=u(12),e=u(43),i=u(21),s=u(1),c=u(44),r=(u(5),u(20),t.X({encapsulation:2,styles:[],data:{}}))}});